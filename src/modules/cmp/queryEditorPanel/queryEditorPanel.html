<template>
  <div class="slds-p-around_small">
    <button class="slds-button slds-button_neutral" onclick={runQuery}>Execute SOQL</button>
    <button class="slds-button slds-button_neutral">Save SOQL</button>
  </div>
  <div class="soql-editor slds-m-horizontal_small slds-m-bottom_small">
    <textarea class="slds-textarea soql-input" placeholder="Input SOQL" onkeydown={handleInputSoql} onkeyup={handleChangeSoql}></textarea>
    <div class="completion-popover slds-popover" style={completionStyle} if:true={isCompletionVisible}>
      <ul class="slds-listbox slds-listbox_vertical" role="presentation">
        <template for:each={completionFields} for:item="field">
          <li role="presentation" class="slds-listbox__item" key={field.name}>
            <div if:true={field.isActive} class="slds-media slds-listbox__option slds-listbox__option_plain slds-media_small is-active" role="option">
              <span class="slds-media__body">
                <span class="slds-truncate" title={field.name}>{field.name} / {field.label}</span>
              </span>
            </div>
            <div if:false={field.isActive} class="slds-media slds-listbox__option slds-listbox__option_plain slds-media_small" role="option">
              <span class="slds-media__body">
                <span class="slds-truncate" title={field.name}>{field.name} / {field.label}</span>
              </span>
            </div>
          </li>
        </template>
      </ul>
    </div>
  </div>
</template>